<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz B√≠blico de Casamento - Alexandre & Karina</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f0ff; /* Fundo roxo claro */
            color: #4a0e7e; /* Texto roxo escuro */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }
        .game-container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 1.5rem;
            padding: 2rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            max-width: 800px; /* Largura m√°xima para o jogo */
            width: 100%;
            text-align: center;
        }
        .game-title {
            font-family: 'Great Vibes', cursive;
            font-size: 3.5rem;
            color: #6a0dad;
            margin-bottom: 1.5rem;
        }
        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            color: #5a118e;
            margin-bottom: 2rem;
        }
        .options-container {
            display: flex;
            flex-wrap: wrap; /* Permite que as op√ß√µes quebrem para a pr√≥xima linha */
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .option-item {
            /* Largura flex√≠vel para as op√ß√µes */
            flex-basis: calc(33.33% - 1.5rem); /* 3 colunas, ajustando para o gap */
            max-width: 180px; /* Mant√©m um limite para desktop */
            height: auto; /* Altura autom√°tica para se ajustar ao conte√∫do */
            min-height: 120px; /* Altura m√≠nima para manter o design */
            border: 3px solid transparent;
            border-radius: 0.75rem;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column; /* Para texto e imagem */
            justify-content: center;
            align-items: center;
            padding: 0.75rem; /* Aumenta o padding interno */
            text-align: center;
        }
        .option-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        .option-item.correct {
            border-color: #28a745; /* Verde para correto */
            background-color: rgba(40, 167, 69, 0.1);
        }
        .option-item.incorrect {
            border-color: #dc3545; /* Vermelho para incorreto */
            background-color: rgba(220, 53, 69, 0.1);
        }
        .option-image {
            max-width: 80px; /* Tamanho da imagem dentro da op√ß√£o */
            max-height: 60px;
            object-fit: contain;
            border-radius: 0.25rem;
            margin-bottom: 0.5rem;
        }
        .option-text {
            font-size: 0.9rem;
            font-weight: 500;
            color: #4a0e7e;
        }
        .feedback-message {
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 1.5rem;
            min-height: 2rem; /* Espa√ßo para a mensagem */
            color: #5a118e; /* Cor do texto da explica√ß√£o */
        }
        .explanation-text {
            font-size: 1rem;
            font-weight: 400;
            margin-top: 0.5rem;
            color: #4a0e7e; /* Cor do texto da explica√ß√£o */
        }
        .score-display {
            font-size: 1.2rem;
            font-weight: 600;
            color: #4a0e7e;
            margin-top: 1rem;
        }
        .timer-display {
            font-size: 1.8rem;
            font-weight: 700;
            color: #6a0dad;
            margin-bottom: 1rem;
        }
        .attempts-display { /* New style for attempts display */
            font-size: 1.2rem;
            font-weight: 600;
            color: #4a0e7e;
            margin-top: 0.5rem;
        }
        .btn-game {
            background-color: #8e44ad; /* Roxo m√©dio */
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 0.75rem;
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-top: 1.5rem;
            cursor: pointer;
        }
        .btn-game:hover {
            background-color: #9b59b6; /* Roxo mais claro ao passar o mouse */
        }

        /* Estilos da barra de progresso */
        .progress-bar-container {
            width: 80%;
            height: 20px;
            background-color: #e0bbff; /* Fundo lil√°s claro */
            border-radius: 10px;
            margin-top: 1.5rem;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .progress-bar-fill {
            height: 100%;
            width: 0%;
            background-color: #6a0dad; /* Lil√°s mais escuro para o preenchimento */
            border-radius: 10px;
            transition: width 0.5s ease-in-out;
        }

        /* Estilos para as regras do jogo */
        .game-rules {
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            text-align: left;
            color: #5a118e;
        }
        .game-rules h3 {
            font-family: 'Great Vibes', cursive;
            font-size: 2rem;
            color: #6a0dad;
            margin-bottom: 1rem;
            text-align: center;
        }
        .game-rules ul {
            list-style: disc;
            margin-left: 1.5rem;
        }
        .game-rules li {
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        /* Ajustes responsivos */
        @media (max-width: 640px) {
            .game-title {
                font-size: 2.5rem;
            }
            .question-text {
                font-size: 1.2rem;
            }
            .option-item {
                flex-basis: calc(50% - 1rem); /* 2 colunas em telas pequenas */
                max-width: none; /* Remove o max-width fixo */
                min-height: 100px; /* Ajuste para telas menores */
                padding: 0.75rem;
            }
            .options-container {
                gap: 1rem;
            }
            .option-image {
                max-width: 60px;
                max-height: 40px;
            }
            .option-text {
                font-size: 0.85rem;
            }
            .progress-bar-container {
                width: 95%; /* Ajusta a largura da barra em telas pequenas */
            }
            .game-rules {
                padding: 1rem;
            }
            .game-rules h3 {
                font-size: 1.5rem;
            }
            .game-rules li {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .option-item {
                flex-basis: 100%; /* 1 coluna em telas muito pequenas */
                max-width: 250px; /* Limite para n√£o ficar muito largo em telas muito estreitas */
                margin-left: auto;
                margin-right: auto;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h2 class="game-title">Quiz B√≠blico de Casamento!</h2>
        <p class="question-text" id="questionText"></p>

        <div class="options-container" id="optionsContainer">
            <!-- As op√ß√µes do quiz ser√£o carregadas aqui via JavaScript -->
        </div>

        <p class="feedback-message" id="feedbackMessage"></p>
        <p class="explanation-text" id="explanationText"></p>
        
        <p class="score-display">Pontua√ß√£o: <span id="scoreDisplay">0</span></p>
        <p class="timer-display">Tempo: <span id="timerDisplay">45</span>s</p>
        <p class="attempts-display">Tentativas: <span id="attemptsDisplay">0</span></p> <!-- Novo elemento para o contador de tentativas -->
        
        <div class="progress-bar-container">
            <div class="progress-bar-fill" id="progressBarFill"></div>
        </div>

        <!-- Sec√ß√£o de Regras do Jogo -->
        <div class="game-rules">
            <h3>Regras do Jogo</h3>
            <ul>
                <li>O objetivo √© alcan√ßar 100 pontos!</li>
                <li>Cada resposta correta vale 10 pontos.</li>
                <li>Cada resposta incorreta ou tempo esgotado tira 10 pontos (a pontua√ß√£o m√≠nima √© 0).</li>
                <li>Voc√™ tem um tempo limitado para responder a cada pergunta. O tempo inicial √© de 45 segundos e **diminui exponencialmente (cerca de 10% do tempo restante) a cada resposta correta** (at√© um m√≠nimo de 5 segundos).</li>
                <li>Se o tempo acabar antes de responder, voc√™ perde 10 pontos e o jogo reinicia automaticamente, retornando √† p√°gina principal.</li>
                <li>As perguntas e as posi√ß√µes das respostas aparecem em ordem aleat√≥ria.</li>
                <li>Ao final do quiz ou ao atingir 100 pontos, voc√™ pode reiniciar o jogo.</li>
                <li>**Tentativas:** O n√∫mero de vezes que voc√™ iniciou o quiz √© contado.</li> <!-- Nova regra -->
            </ul>
        </div>

        <button class="btn-game" id="nextQuestionBtn">Pr√≥xima Pergunta</button>
        <button class="btn-game hidden" id="resetGameBtn">Reiniciar Jogo</button>
    </div>

    <script>
        // Defini√ß√£o das perguntas e respostas do quiz
        const allQuestions = [
            {
                scenario: "De acordo com G√™nesis 2:24, o que o homem deve fazer ao se casar?",
                options: [
                    { text: "Deixar pai e m√£e e unir-se √† sua mulher", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=G√™nesis", explanation: "G√™nesis 2:24 diz: 'Por essa raz√£o, o homem deixar√° pai e m√£e e se unir√° √† sua mulher, e eles se tornar√£o uma s√≥ carne.' Isso estabelece a base para o casamento como uma nova unidade familiar." },
                    { text: "Construir uma grande casa", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Casa" },
                    { text: "Adquirir muitas riquezas", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Riquezas" }
                ]
            },
            {
                scenario: "Qual livro da B√≠blia √© conhecido por descrever o amor de forma po√©tica, muitas vezes citado em casamentos?",
                options: [
                    { text: "Salmos", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Salmos" },
                    { text: "C√¢ntico dos C√¢nticos", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=C√¢nticos", explanation: "C√¢ntico dos C√¢nticos (ou Cantares de Salom√£o) √© um livro po√©tico que celebra o amor rom√¢ntico e a beleza do relacionamento entre um homem e uma mulher." },
                    { text: "Prov√©rbios", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Prov√©rbios" }
                ]
            },
            {
                scenario: "Em Ef√©sios 5:25, como os maridos s√£o instru√≠dos a amar suas esposas?",
                options: [
                    { text: "Como Cristo amou a igreja e entregou-se por ela", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Cristo", explanation: "Ef√©sios 5:25 instrui: 'Maridos, amem suas mulheres, assim como Cristo amou a igreja e entregou-se por ela'. Isso estabelece um padr√£o de amor sacrificial e abnegado." },
                    { text: "Com sabedoria e prud√™ncia", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Sabedoria" },
                    { text: "Com autoridade e poder", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Poder" }
                ]
            },
            {
                scenario: "Qual √© a instru√ß√£o para as esposas em Ef√©sios 5:22?",
                options: [
                    { text: "Sejam submissas a seus maridos, como ao Senhor", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Submiss√£o", explanation: "Ef√©sios 5:22 diz: 'Mulheres, sujeitem-se a seus maridos, como ao Senhor.' Este vers√≠culo √© frequentemente interpretado no contexto de uma submiss√£o m√∫tua e respeito dentro do casamento crist√£o." },
                    { text: "Governem o lar com firmeza", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Governo" },
                    { text: "Sejam independentes em tudo", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Independ√™ncia" }
                ]
            },
            {
                scenario: "De acordo com Hebreus 13:4, como o casamento deve ser considerado?",
                options: [
                    { text: "Honroso entre todos, e o leito conjugal sem m√°cula", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Honra", explanation: "Hebreus 13:4 afirma: 'O casamento deve ser honrado por todos, e o leito conjugal conservado puro, pois Deus julgar√° os imorais e os ad√∫lteros.' Isso enfatiza a santidade e a pureza do casamento." },
                    { text: "Um contrato tempor√°rio", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Contrato" },
                    { text: "Apenas para procria√ß√£o", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Procria√ß√£o" }
                ]
            },
            {
                scenario: "Qual √© o principal motivo para o casamento, segundo 1 Cor√≠ntios 7:2?",
                options: [
                    { text: "Para evitar a imoralidade sexual", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Imoralidade", explanation: "1 Cor√≠ntios 7:2 diz: 'Mas, por causa da imoralidade, cada um deve ter sua esposa, e cada mulher o seu pr√≥prio marido.' O casamento √© apresentado como o contexto apropriado para a intimidade sexual." },
                    { text: "Para ter filhos", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Filhos" },
                    { text: "Para ter companhia", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Companhia" }
                ]
            },
            {
                scenario: "Em Mateus 19:6, Jesus fala sobre a uni√£o no casamento. O que Ele diz que ningu√©m deve separar?",
                options: [
                    { text: "O que Deus uniu", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Deus", explanation: "Mateus 19:6 afirma: 'Assim, eles j√° n√£o s√£o dois, mas uma s√≥ carne. Portanto, o que Deus uniu, ningu√©m o separe.' Isso refor√ßa a indissolubilidade do casamento aos olhos de Deus." },
                    { text: "Os bens materiais", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Bens" },
                    { text: "As fam√≠lias", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Fam√≠lias" }
                ]
            },
            {
                scenario: "Qual a import√¢ncia da paci√™ncia no casamento, segundo 1 Cor√≠ntios 13:4?",
                options: [
                    { text: "O amor √© paciente", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Paci√™ncia", explanation: "1 Cor√≠ntios 13:4, parte do famoso 'hino ao amor', come√ßa dizendo: 'O amor √© paciente, o amor √© bondoso...' A paci√™ncia √© uma virtude essencial para um relacionamento duradouro." },
                    { text: "A paci√™ncia evita discuss√µes", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Discuss√µes" },
                    { text: "A paci√™ncia traz riqueza", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Riqueza" }
                ]
            },
            {
                scenario: "Em Prov√©rbios 18:22, o que √© dito sobre encontrar uma esposa?",
                options: [
                    { text: "Quem encontra uma esposa encontra algo bom e alcan√ßa o favor do Senhor", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Favor", explanation: "Prov√©rbios 18:22 declara: 'Quem encontra uma esposa encontra algo bom; e alcan√ßa o favor do Senhor.' Isso destaca o casamento como uma b√™n√ß√£o de Deus." },
                    { text: "Quem encontra uma esposa encontra muitos problemas", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Problemas" },
                    { text: "Quem encontra uma esposa deve ser rico", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Rico" }
                ]
            },
            {
                scenario: "Como Colossenses 3:18-19 instrui esposas e maridos?",
                options: [
                    { text: "Esposas, sujeitem-se a seus maridos; maridos, amem suas esposas e n√£o as tratem com amargura", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Colossenses", explanation: "Colossenses 3:18-19 oferece instru√ß√µes complementares para ambos os c√¥njuges, enfatizando o respeito m√∫tuo e o amor, evitando a amargura." },
                    { text: "Esposas, dominem; maridos, obede√ßam", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Dominar" },
                    { text: "Esposas, sejam independentes; maridos, sejam passivos", isCorrect: false, src: "https://placehold.co/80%60x60/4a0e7e/ffffff?text=Passivo" }
                ]
            },
            {
                scenario: "Em 1 Pedro 3:7, como os maridos s√£o chamados a tratar suas esposas?",
                options: [
                    { text: "Com considera√ß√£o, tratando-as como parte mais fr√°gil e coerdeiras da gra√ßa da vida", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Considera√ß√£o", explanation: "1 Pedro 3:7 exorta os maridos a viverem com suas esposas 'com discernimento, tratando-as com honra, como parte mais fr√°gil e coerdeiras do dom da gra√ßa da vida, de forma que n√£o sejam impedidas as suas ora√ß√µes'." },
                    { text: "Com rigidez e disciplina", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Rigidez" },
                    { text: "Com indiferen√ßa", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Indiferen√ßa" }
                ]
            },
            {
                scenario: "Qual √© a base do casamento crist√£o, segundo 1 Jo√£o 4:7-8?",
                options: [
                    { text: "O amor, pois Deus √© amor", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Amor", explanation: "1 Jo√£o 4:7-8 afirma que 'Deus √© amor'. O amor de Deus √© o fundamento e o modelo para o amor dentro do casamento crist√£o." },
                    { text: "A prosperidade financeira", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Dinheiro" },
                    { text: "A beleza f√≠sica", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Beleza" }
                ]
            },
            {
                scenario: "Em Eclesiastes 4:9-12, o que √© dito sobre dois serem melhor que um?",
                options: [
                    { text: "Dois s√£o melhor que um, porque t√™m melhor recompensa do seu trabalho. Se um cair, o outro levanta o seu companheiro.", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Eclesiastes", explanation: "Eclesiastias 4:9-12 destaca a for√ßa e o apoio m√∫tuo que v√™m da uni√£o, sendo um texto frequentemente usado para descrever a parceria no casamento." },
                    { text: "Dois podem fazer o dobro do trabalho", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Trabalho" },
                    { text: "Dois s√£o mais felizes que um", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Felicidade" }
                ]
            },
            {
                scenario: "Qual a import√¢ncia do perd√£o no casamento, segundo Ef√©sios 4:32?",
                options: [
                    { text: "Sede bondosos e compassivos uns para com os outros, perdoando-vos mutuamente, como Deus vos perdoou em Cristo", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Perd√£o", explanation: "Ef√©sios 4:32 enfatiza a necessidade do perd√£o m√∫tuo no casamento, espelhando o perd√£o que recebemos de Deus atrav√©s de Cristo." },
                    { text: "O perd√£o apaga as mem√≥rias ruins", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Mem√≥rias" },
                    { text: "O perd√£o √© opcional", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Opcional" }
                ]
            },
            {
                scenario: "Em 1 Cor√≠ntios 7:3-5, o que √© dito sobre a intimidade conjugal?",
                options: [
                    { text: "O marido deve cumprir o seu dever conjugal para com a sua mulher, e da mesma forma a mulher para com o seu marido", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Intimidade", explanation: "1 Cor√≠ntios 7:3-5 aborda a import√¢ncia da intimidade f√≠sica e do respeito m√∫tuo na vida sexual do casal, dentro dos limites do casamento." },
                    { text: "A intimidade √© secund√°ria", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Secund√°ria" },
                    { text: "A intimidade √© apenas para procria√ß√£o", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Procria√ß√£o" }
                ]
            },
            {
                scenario: "Qual √© a instru√ß√£o em Prov√©rbios 31:10 para uma mulher virtuosa?",
                options: [
                    { text: "Mulher virtuosa, quem a achar√°? O seu valor muito excede o de joias preciosas", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Virtuosa", explanation: "Prov√©rbios 31 descreve as qualidades de uma mulher virtuosa, cujo valor √© inestim√°vel, sendo um exemplo de esposa e m√£e dedicada." },
                    { text: "Uma mulher virtuosa √© aquela que √© rica", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Rica" },
                    { text: "Uma mulher virtuosa √© aquela que √© bela", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Bela" }
                ]
            },
            {
                scenario: "Em Malaquias 2:16, o que Deus diz que odeia?",
                options: [
                    { text: "O div√≥rcio", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Div√≥rcio", explanation: "Malaquias 2:16 afirma: 'Pois eu odeio o div√≥rcio', diz o Senhor, o Deus de Israel. Este vers√≠culo sublinha a santidade do pacto matrimonial aos olhos de Deus." },
                    { text: "A desobedi√™ncia", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Desobedi√™ncia" },
                    { text: "A idolatria", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Idolatria" }
                ]
            },
            {
                scenario: "Qual o papel do homem como cabe√ßa da mulher, segundo Ef√©sios 5:23?",
                options: [
                    { text: "O marido √© o cabe√ßa da mulher, como Cristo √© o cabe√ßa da igreja", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Cabe√ßa", explanation: "Ef√©sios 5:23 estabelece que 'o marido √© o cabe√ßa da mulher, como tamb√©m Cristo √© o cabe√ßa da igreja'. Isso implica lideran√ßa amorosa e sacrificial, n√£o domina√ß√£o." },
                    { text: "O homem deve controlar a mulher", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Controle" },
                    { text: "O homem √© superior √† mulher", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Superior" }
                ]
            },
            {
                scenario: "Em Tito 2:4-5, o que as mulheres mais velhas devem ensinar as mais jovens sobre o casamento?",
                options: [
                    { text: "A amarem seus maridos e seus filhos, a serem prudentes, puras, trabalhadeiras, bondosas e sujeitas a seus maridos", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Tito", explanation: "Tito 2:4-5 instrui as mulheres mais velhas a ensinarem as mais jovens a viverem de forma a honrar a Deus em seus pap√©is de esposas e m√£es." },
                    { text: "A serem ambiciosas e bem-sucedidas profissionalmente", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Ambi√ß√£o" },
                    { text: "A serem independentes de seus maridos", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Independ√™ncia" }
                ]
            },
            {
                scenario: "Qual a import√¢ncia da ora√ß√£o em casal, segundo Mateus 18:20?",
                options: [
                    { text: "Onde dois ou tr√™s estiverem reunidos em meu nome, ali estou eu no meio deles", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Ora√ß√£o", explanation: "Mateus 18:20, embora n√£o espec√≠fico sobre casamento, √© frequentemente aplicado √† ora√ß√£o em casal, indicando a presen√ßa de Cristo onde os crentes se re√∫nem em Seu nome." },
                    { text: "A ora√ß√£o garante riqueza", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Riqueza" },
                    { text: "A ora√ß√£o √© apenas para momentos de crise", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Crise" }
                ]
            },
            {
                scenario: "Em Romanos 12:10, o que √© dito sobre o amor fraternal?",
                options: [
                    { text: "Amai-vos cordialmente uns aos outros com amor fraternal, preferindo-vos em honra uns aos outros", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Fraternal", explanation: "Romanos 12:10 encoraja o amor fraternal e a honra m√∫tua, princ√≠pios que s√£o fundamentais para um casamento saud√°vel e respeitoso." },
                    { text: "Ame apenas a si mesmo", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Ego√≠smo" },
                    { text: "O amor √© uma emo√ß√£o passageira", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Passageiro" }
                ]
            },
            {
                scenario: "Qual a import√¢ncia da alegria no casamento, segundo Prov√©rbios 17:22?",
                options: [
                    { text: "O cora√ß√£o alegre √© bom rem√©dio, mas o esp√≠rito abatido resseca os ossos", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Alegria", explanation: "Prov√©rbios 17:22 destaca o valor da alegria e do bom humor para a sa√∫de e o bem-estar, elementos importantes para um casamento feliz." },
                    { text: "A alegria √© desnecess√°ria", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Desnecess√°rio" },
                    { text: "A alegria √© apenas para os jovens", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Jovens" }
                ]
            },
            {
                scenario: "Em Filipenses 2:3, o que √© incentivado em rela√ß√£o aos outros?",
                options: [
                    { text: "Nada fa√ßais por partidarismo ou por vangl√≥ria, mas com humildade, considerando cada um os outros superiores a si mesmo", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Humildade", explanation: "Filipenses 2:3 encoraja a humildade e a considera√ß√£o pelos outros, virtudes cruciais para a harmonia e o respeito m√∫tuo dentro do casamento." },
                    { text: "Busque seus pr√≥prios interesses", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Interesses" },
                    { text: "Seja sempre o primeiro", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Primeiro" }
                ]
            },
            {
                scenario: "Qual a import√¢ncia da comunica√ß√£o no casamento, segundo Tiago 1:19?",
                options: [
                    { text: "Todo homem seja pronto para ouvir, tardio para falar, tardio para se irar", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Comunica√ß√£o", explanation: "Tiago 1:19 oferece princ√≠pios para uma comunica√ß√£o eficaz: ser um bom ouvinte, pensar antes de falar e controlar a raiva, essenciais para resolver conflitos no casamento." },
                    { text: "Fale sempre o que pensa", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Falar" },
                    { text: "Evite conversas dif√≠ceis", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Evitar" }
                ]
            },
            {
                scenario: "Em 1 Cor√≠ntios 16:14, qual a instru√ß√£o final para todas as coisas?",
                options: [
                    { text: "Todas as vossas coisas sejam feitas com amor", isCorrect: true, src: "https://placehold.co/80x60/e0bbff/4a0e7e?text=Amor", explanation: "1 Cor√≠ntios 16:14 resume a ess√™ncia da vida crist√£ e do casamento: que todas as a√ß√µes sejam motivadas pelo amor." },
                    { text: "Todas as vossas coisas sejam feitas com pressa", isCorrect: false, src: "https://placehold.co/80x60/f7f0ff/4a0e7e?text=Pressa" },
                    { text: "Todas as vossas coisas sejam feitas com perfei√ß√£o", isCorrect: false, src: "https://placehold.co/80x60/4a0e7e/ffffff?text=Perfei√ß√£o" }
                ]
            }
        ];

        // Refer√™ncias aos elementos do DOM
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackMessage = document.getElementById('feedbackMessage');
        const explanationText = document.getElementById('explanationText');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const nextQuestionBtn = document.getElementById('nextQuestionBtn');
        const resetGameBtn = document.getElementById('resetGameBtn');
        const progressBarFill = document.getElementById('progressBarFill');
        const timerDisplay = document.getElementById('timerDisplay');
        const attemptsDisplay = document.getElementById('attemptsDisplay'); // Refer√™ncia ao novo elemento

        let shuffledQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let questionAnswered = false;
        const winningScore = 100;
        let timerValue = 0;
        let initialTimer = 45;
        const minTimer = 5;
        let intervalId;
        let attemptsCount = 0; // Novo contador de tentativas

        // Fun√ß√£o para embaralhar um array (Fisher-Yates shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Atualiza a barra de progresso
        function updateProgressBar() {
            const progress = (score / winningScore) * 100;
            progressBarFill.style.width = `${Math.min(100, progress)}%`;
        }

        // Inicia o timer para a pergunta atual
        function startTimer() {
            timerValue = initialTimer;
            timerDisplay.textContent = timerValue;

            if (intervalId) {
                clearInterval(intervalId);
            }

            intervalId = setInterval(() => {
                timerValue--;
                timerDisplay.textContent = timerValue;

                if (timerValue <= 0) {
                    clearInterval(intervalId);
                    handleTimeUp();
                }
            }, 1000);
        }

        // Para o timer
        function stopTimer() {
            clearInterval(intervalId);
        }

        // Lida com o tempo esgotado
        function handleTimeUp() {
            if (questionAnswered) return;

            questionAnswered = true;

            Array.from(optionsContainer.children).forEach(item => {
                item.style.pointerEvents = 'none';
            });

            feedbackMessage.textContent = 'Tempo esgotado! Voc√™ perdeu esta rodada. üòî';
            explanationText.textContent = 'Voc√™ ser√° redirecionado para a p√°gina principal.';
            score = Math.max(0, score - 10);
            scoreDisplay.textContent = score;
            updateProgressBar();

            setTimeout(() => {
                window.location.href = 'index.html';
            }, 3000);
        }

        // Carrega e exibe a pergunta atual
        function loadQuestion() {
            questionAnswered = false;
            feedbackMessage.textContent = '';
            explanationText.textContent = '';
            optionsContainer.innerHTML = '';
            nextQuestionBtn.classList.add('hidden');
            resetGameBtn.classList.add('hidden');

            // Verifica condi√ß√£o de vit√≥ria antes de carregar a pr√≥xima pergunta
            if (score >= winningScore) {
                stopTimer();
                questionText.textContent = 'Parab√©ns! Voc√™ alcan√ßou 100 pontos!';
                feedbackMessage.textContent = 'Voc√™ √© um expert em casamentos b√≠blicos! üéâ';
                nextQuestionBtn.classList.add('hidden');
                resetGameBtn.classList.remove('hidden');
                return;
            }
            
            timerDisplay.textContent = initialTimer;

            if (currentQuestionIndex < shuffledQuestions.length) {
                const q = shuffledQuestions[currentQuestionIndex];
                questionText.textContent = q.scenario;

                // Embaralha as op√ß√µes desta pergunta
                const shuffledOptions = shuffleArray([...q.options]);

                shuffledOptions.forEach((option, index) => {
                    const optionItem = document.createElement('div');
                    optionItem.classList.add('option-item');
                    // Adiciona um atributo para identificar a resposta correta no DOM
                    if (option.isCorrect) {
                        optionItem.dataset.isCorrect = 'true';
                    }

                    if (option.src) {
                        const img = document.createElement('img');
                        img.src = option.src;
                        img.alt = option.text;
                        img.classList.add('option-image');
                        optionItem.appendChild(img);
                    }
                    
                    const text = document.createElement('p');
                    text.textContent = option.text;
                    text.classList.add('option-text');
                    optionItem.appendChild(text);

                    optionsContainer.appendChild(optionItem);

                    // Passa isCorrect diretamente, pois j√° est√° no objeto option
                    optionItem.addEventListener('click', () => checkAnswer(optionItem, option.isCorrect));
                });
                startTimer();
            } else {
                stopTimer();
                questionText.textContent = 'Fim do Quiz!';
                feedbackMessage.textContent = `Voc√™ respondeu todas as perguntas. Sua pontua√ß√£o final √©: ${score} de ${winningScore}. Tente novamente para alcan√ßar 100 pontos!`;
                nextQuestionBtn.classList.add('hidden');
                resetGameBtn.classList.remove('hidden');
            }
        }

        // Verifica a resposta do utilizador
        function checkAnswer(clickedItem, isCorrect) {
            if (questionAnswered) return;
            if (score >= winningScore) return;
            stopTimer();

            questionAnswered = true;

            Array.from(optionsContainer.children).forEach(item => {
                item.style.pointerEvents = 'none';
            });

            if (isCorrect) {
                clickedItem.classList.add('correct');
                feedbackMessage.textContent = 'Correto! üéâ';
                score += 10;
                initialTimer = Math.max(minTimer, Math.round(initialTimer * 0.9)); 
            } else {
                clickedItem.classList.add('incorrect');
                feedbackMessage.textContent = 'Incorreto. A resposta certa est√° marcada. ü§î';
                score = Math.max(0, score - 10);
                const correctOptionElement = optionsContainer.querySelector('[data-is-correct="true"]');
                if (correctOptionElement) {
                    correctOptionElement.classList.add('correct');
                }
            }
            
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            const correctOption = currentQuestion.options.find(opt => opt.isCorrect);
            if (correctOption && correctOption.explanation) {
                explanationText.textContent = `Explica√ß√£o: ${correctOption.explanation}`;
            }

            scoreDisplay.textContent = score;
            updateProgressBar();

            if (score >= winningScore) {
                loadQuestion();
            } else {
                nextQuestionBtn.classList.remove('hidden');
            }
        }

        // Avan√ßa para a pr√≥xima pergunta
        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        // Reinicia o jogo
        function resetGame() {
            currentQuestionIndex = 0;
            score = 0;
            initialTimer = 45;
            attemptsCount++; // Incrementa o contador de tentativas ao reiniciar
            scoreDisplay.textContent = score;
            attemptsDisplay.textContent = attemptsCount; // Atualiza o display de tentativas
            updateProgressBar();
            shuffledQuestions = shuffleArray([...allQuestions]);
            loadQuestion();
        }

        // Event Listeners
        nextQuestionBtn.addEventListener('click', nextQuestion);
        resetGameBtn.addEventListener('click', resetGame);

        // Inicializa o jogo ao carregar a p√°gina
        window.onload = () => {
            // Tenta carregar o contador de tentativas do localStorage
            const storedAttempts = localStorage.getItem('quizAttempts');
            if (storedAttempts) {
                attemptsCount = parseInt(storedAttempts);
            } else {
                attemptsCount = 0; // Inicia em 0 se n√£o houver tentativas salvas
            }
            attemptsDisplay.textContent = attemptsCount; // Garante que o display seja atualizado no carregamento

            resetGame(); // Inicia o jogo embaralhando as perguntas
        };

        // Salva o contador de tentativas no localStorage antes de sair da p√°gina
        window.addEventListener('beforeunload', () => {
            localStorage.setItem('quizAttempts', attemptsCount);
        });
    </script>
</body>
</html>
